<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/head :: head">
    <title id="pageTitle">수강생 등록</title>
</head>
<body>
    <div th:insert="~{fragments/nav :: menu}"></div>
    <div class="container">
        <h4>수강생 등록</h4>
        <form action="#" th:action="@{/students}" th:object="${studentRequestDto}" method="post">
            <div class="form-group">
                <label for="student_name">이름</label>
                <input type="text" id="student_name" class="form-control" name="name" th:field="*{name}">
                <p class="alert alert-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">
            </div>
            <div class="form-group">
                <label for="instructor_nick_name">생년월일</label>
                <input type="date" id="instructor_nick_name" class="form-control" name="birthDate">
            </div>
            <div class="form-group">
                <label for="student_tel">전화번호</label>
                <input type="text" id="student_tel" class="form-control" name="tel">
            </div>
            <div class="form-group">
                <label for="student_email">이메일</label>
                <input type="text" id="student_email" class="form-control " name="email">
            </div>
            <div class="form-group">
                <label for="student_address">주소</label>
                <input type="text" id="student_address" class="form-control" name="address">
            </div>
            <div class="form-group">
                <label for="studentType">유형</label>
                <div class="input-group mb-3">
                    <select id="studentType" name="studentType" class="custom-select" value="STUDENT">
                        <option value="STUDENT">수강생</option>
                        <option value="CHILDREN">학생(자녀)</option>
                    </select>
                </div>
            </div>
            <div id="parentWrapper" class="d-none">
                <label for="parent">학부모</label>
                <div class="form-group" id="student_parent" >
                    <div class="input-group mb-3">
                        <input type="hidden" id="parentId" class="form-control" name="parentId" disabled>
                        <input type="text" id="parent" class="form-control" name="parentName" disabled>
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" data-toggle="modal" type="button" data-target="#parentSearchModal" id="parent_search_modal_open_button">검색</button>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="my-4">
                <input type="submit" class="btn btn-primary btn-block" value="등록">
            </div>

        </form>
    </div>

    <div class="modal fade" id="parentSearchModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">학부모 검색</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <div class="input-group mb-3">
                                <input type="text" id="parent_name_input" class="form-control" name="parentName" placeholder="학부모명 입력">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" data-toggle="modal" type="buttwww.bootstrapon" id="parent_search_button">검색</button>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="table-responsive table-sm">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">이름</th>
                                <th scope="col">전화번호</th>
                            </tr>
                            </thead>
                            <tbody>
<!--                            <tr-->
<!--                                    th:each="instructor: ${instructors}"-->
<!--                            >-->
<!--                                <th th:text="${instructor.id}"></th>-->
<!--                                <th>-->
<!--                                    <a th:href="@{/instructors/__${instructor.id}__}" th:text="${instructor.username}"></a>-->
<!--                                </th>-->
<!--                                <th th:text="${instructor.username}"></th>-->
<!--                                <th th:text="${instructor.tel}"></th>-->
<!--                            </tr>-->
                            </tbody>
                        </table>
                    </div>
                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary"  data-toggle="modal" data-target="#postParentModal" >신규등록</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="postParentModal" tabindex="-2">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="postParentModalTitle">학부모 등록</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <label for="parentName">이름</label>
                        <div class="form-group">
                            <div class="input-group mb-3">
                                <input type="text" id="parentName" class="form-control" name="name">
                            </div>
                        </div>
                        <label for="parentTel">전화번호</label>
                        <div class="form-group">
                            <div class="input-group mb-3">
                                <input type="text" id="parentTel" class="form-control" name="tel">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary">신규등록</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("studentType").addEventListener("change", (e) => {
            if(e.target.value === "STUDENT"){
                document.getElementById("parentWrapper").classList.add("d-none")
            } else {
                document.getElementById("parentWrapper").classList.remove("d-none")
            }
        });


    </script>
</body>
</html>